<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ynjh.company.dao.companyrecruit.CompanyRecruitMapper">
<insert id="addCompanyRecruit" parameterType="CompanyRecruit">
		insert into companyRecruit (cmpRecTitle,cmpRecWage,cmpRecEducation,cmpRecExperience,cmpRecPeople,cmpRecTime,cmpRecStatus,companyId,cmpRecCity) values(#{cmpRecTitle},#{cmpRecWage},#{cmpRecEducation},#{cmpRecExperience},#{cmpRecPeople},#{cmpRecTime},#{cmpRecStatus},#{companyId},#{cmpRecCity})
</insert>
<update id="updateCmpRecruit" parameterType="CompanyRecruit">
		update companyRecruit set cmpRecWage=#{cmpRecWage},
		cmpRecEducation=#{cmpRecEducation},cmpRecExperience=#{cmpRecExperience},
		cmpRecPeople=#{cmpRecPeople} where id=#{id}
</update>
<update id="updateCmpRecStatus" parameterType="Int" >
		update companyRecruit set cmpRecStatus=#{cmpRecStatus} where id=#{id}
</update>
<select id="findAll"  resultType="CompanyRecruit">
		select * from companyRecruit where companyId=#{companyId}
	<if test="page!=null">
		limit #{page},20
	</if>
</select>
<select id="findById" parameterType="int" resultType="CompanyRecruit">
	select * from companyRecruit where id=#{id}
</select>
<select id="getMaxRecordCount" resultType="int">
	select count(*) from companyRecruit where cmpRecStatus != 3
</select>
<select id="getResumeCount" resultType="int">
	select count(*) from companyResume c,companyRecruit r where c.companyRecruitId=r.id and cmprAction = 1
</select>
<select id="findCompanyRecruitId" resultType="int">
	select companyRecruitId from companyResume c,companyRecruit r where c.companyRecruitId=r.id
</select>
<!-- 牟勇：根据招聘岗位名称进行查询招聘信息。包括公司全称，公司简称，岗位名称，学历，工作经验要求等companyRecruit表中的全部信息 -->
<select id="findByCmpRecTitle" resultType="CompanyRecruit">
	select companyName,companySimpleName,cr.* 
	from companyrecruit cr,company c 
	where cmpRecTitle like #{cmpRecTitle} 
	and cmpRecStatus=2 
	and TIMESTAMPDIFF(MONTH,cmpRecTime,now()) &lt;= 6 
	order by cmpRecTime desc
</select>
</mapper>