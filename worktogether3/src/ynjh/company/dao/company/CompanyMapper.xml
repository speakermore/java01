<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace指定我们后面需要使用的接口的完全限定名 -->
<mapper namespace="ynjh.company.dao.company.CompanyMapper">

	<!--
		insert/update/delect标签没有resultType属性，返回值都是int  
		OGNL表达式中，如果参数传入的是基本类型，则直接使用参数名
		如果参数传入的是对象，则直接使用属性名
	-->
	<!-- 添加用户信息 -->
	<insert id="addCompany" parameterType="Company">
		insert into company(
		companyLoginId,companyPassword,companyName,companySimpleName,companyLogo,companyLicenseImg,companyLicenseNo,companyCorporator,
		companyTel,companyEmail,companyAddress,companyStatus) values (#{companyLoginId},#{companyPassword},#{companyName},#{companySimpleName},#{companyLogo},
		#{companyLicenseImg},#{companyLicenseNo},#{companyCorporator},#{companyTel},#{companyEmail},
		#{companyAddress},1)
	</insert> 
	<insert id="addCompanyDetailImg">
		insert into companyDetailImg(companyId,companyDetailImg,companyDetailDisc)values(#{companyId},#{companyDetailImg},#{companyDetailDisc})
	</insert>
	<insert id="addCompanyConnection">
		insert into companyconnection(companyId,cmpConnection,cmpConnectionName)values(#{companyId},#{cmpConnection},#{cmpConnectionName})
	</insert>
	<!-- 更改用户信息 -->
	<update id="updateCompanyById" parameterType="Company">
		update company set companyName=#{companyName},companyLogo=#{companyLogo},companyLicenseImg=#{companyLicenseImg},
		companyLicenseNo=#{companyLicenseNo},companyCorporator=#{companyCorporator},companyTel=#{companyTel},
		companyEmail=#{companyEmail},companyAddress=#{companyAddress},companyStatus=#{companyStatus} where id=#{id}
	</update>
	<update id="updatePassword" >
		update company set companyPassword=#{companyPassword} where id=#{id}
	</update>
	<update id="updateImg">
		update companyDetailImg set companyDetailImg=#{companyDetailImg} where id=#{id} and companyDetailDisc=#{companyDetailDisc}
	</update>
	<update id="updateCompanyConnection">
		update companyconnection set companyId=#{companyId},cmpConnection=#{cmpConnection},cmpConnectionName=#{cmpConnectionName} where id=#{id}
	</update>
	<delete id="deleteCompanyConnection" parameterType="Integer">
		delete from companyconnection where id=#{id}
	</delete>
	
	<select id="findByloginIdAndPassword" resultType="Company">
		select * from company where companyLoginId=#{companyLoginId} and companyPassword=#{companyPassword}
	</select>
	<select id="findById" parameterType="Integer" resultType="Company">
		select * from company where id=#{id}
	</select>
	<select id="findDetailImg" parameterType="Integer" resultType="CompanyDetailImg">
		select * from companyDetailImg where companyId=#{companyId}
	</select>
	<select id="findCompanyConnection" parameterType="Integer" resultType="CompanyConnection">
		select * from companyconnection where companyId=#{companyId}
	</select>
</mapper>